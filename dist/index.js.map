{
  "version": 3,
  "sources": ["../bin/live-reload.js", "../src/User.js", "../src/utils/userIFrame.js", "../src/utils/authStatus.js", "../src/index.js"],
  "sourcesContent": ["new EventSource(`http://localhost:${SERVE_PORT}/esbuild`).addEventListener('change', () =>\r\n  location.reload()\r\n);\r\n", "export class User {\r\n   constructor({ email, name, acceptCommunications }) {\r\n      this.email = email\r\n      this.name = name\r\n      this.acceptCommunications = acceptCommunications\r\n   }\r\n}\r\n", "import { User } from \"@/User\"\r\n\r\nexport function getUserWithIFrame() {\r\n   return new Promise((resolve, reject) => {\r\n      const iframe = document.createElement(\"iframe\")\r\n\r\n      iframe.src = \"/user-account\"\r\n      iframe.width = \"0\"\r\n      iframe.height = \"0\"\r\n      iframe.style.display = \"none\"\r\n\r\n      // Step 4: Append the iframe to the container\r\n      document.body.appendChild(iframe)\r\n      iframe.addEventListener(\"load\", () => {\r\n         const iframeWindow = iframe.contentWindow\r\n\r\n         const userEmailInput = iframeWindow.document.getElementById(\"wf-user-account-email\")\r\n         const userNameInput = iframeWindow.document.getElementById(\"wf-user-account-name\")\r\n         const userAcceptCommunicationCheckbox = iframeWindow.document.getElementById(\r\n            \"wf-user-account-accept-communications\"\r\n         )\r\n\r\n         const intervalId = setInterval(async () => {\r\n            console.log(\"check\")\r\n            if (!userEmailInput.value || !userNameInput.value) return\r\n\r\n            const user = new User({\r\n               email: userEmailInput.value,\r\n               name: userNameInput.value,\r\n               acceptCommunications: userAcceptCommunicationCheckbox.checked,\r\n            })\r\n\r\n            clearInterval(intervalId)\r\n            resolve(user)\r\n         }, 10)\r\n\r\n         setTimeout(() => {\r\n            clearInterval(intervalId)\r\n            reject(\"Could not get user data\")\r\n         }, 1200)\r\n      })\r\n   })\r\n}\r\n", "export function isLoggedIn() {\r\n   return getCookie(\"wf_loggedin\") === \"true\"\r\n}\r\n\r\nfunction getCookie(cookieName) {\r\n   const name = cookieName + \"=\"\r\n   const decodedCookie = decodeURIComponent(document.cookie)\r\n   const cookieArray = decodedCookie.split(\";\")\r\n\r\n   for (let i = 0; i < cookieArray.length; i++) {\r\n      let cookie = cookieArray[i]\r\n      while (cookie.charAt(0) === \" \") {\r\n         cookie = cookie.substring(1)\r\n      }\r\n      if (cookie.indexOf(name) === 0) {\r\n         return cookie.substring(name.length, cookie.length)\r\n      }\r\n   }\r\n   return null\r\n}\r\n", "import { getUserWithIFrame } from \"$utils/userIFrame\"\r\nimport { User } from \"./User\"\r\nimport { isLoggedIn } from \"./utils/authStatus\"\r\n\r\nconst userEmailElements = Array.from(document.querySelectorAll(\"[brs-memberinfo=email]\"))\r\nconst userNameElements = Array.from(document.querySelectorAll(\"[brs-memberinfo=name]\"))\r\n\r\nconst USERDATA_KEY = \"brsUserData\"\r\n\r\nwindow.Webflow ||= []\r\nwindow.Webflow.push(async () => {\r\n   console.log(\"Login script runs\")\r\n   if (window.location.href.includes(\"/user-account\")) return\r\n   if (!isLoggedIn()) {\r\n      localStorage.removeItem(USERDATA_KEY)\r\n      return\r\n   }\r\n\r\n   let user\r\n   const userData = localStorage.getItem(USERDATA_KEY)\r\n   if (userData) {\r\n      user = new User(JSON.parse(userData))\r\n   } else {\r\n      try {\r\n         user = await getUserWithIFrame()\r\n         localStorage.setItem(USERDATA_KEY, JSON.stringify(user))\r\n      } catch (err) {\r\n         console.log(err)\r\n      }\r\n   }\r\n   console.log(user)\r\n   userEmailElements.forEach(el => (el.innerText = user.email))\r\n   userNameElements.forEach(el => (el.innerText = user.name))\r\n})\r\n"],
  "mappings": "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",
  "names": []
}
